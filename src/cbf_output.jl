

function writecbfdata(filename,dat::CBFData, comments="")
    if endswith(filename,"cbf.gz")
        fd = gzopen(filename,"w")
    else
        @assert endswith(filename, "cbf")
        fd = open(filename,"w")
    end

    if comments == ""
        println(fd,"# Generated by ConicBenchmarkUtilities.jl")
    else
        println(fd,comments)
    end
    println(fd,"VER\n2\n")

    println(fd,"OBJSENSE")
    if dat.sense == :Min
        println(fd,"MIN")
    else
        @assert dat.sense == :Max
        println(fd,"MAX")
    end
    println(fd)

    println(fd,"VAR")
    println(fd,dat.nvar, " ", length(dat.var))
    for (cone,nvar) in dat.var
        println(fd, cone, " ", nvar)
    end
    println(fd)

    if length(dat.intlist) > 0
        println(fd, "INT")
        println(fd, length(dat.intlist))
        for k in dat.intlist
            println(fd, k-1)
        end
        println(fd)
    end

    println(fd,"CON")
    println(fd,dat.nconstr, " ", length(dat.con))
    for (cone,ncon) in dat.con
        println(fd, cone, " ", ncon)
    end
    println(fd)
    
    println(fd,"OBJACOORD")
    I = find(dat.objvec)
    println(fd,length(I))
    for i in I
        println(fd,i-1," ",dat.objvec[i])
    end
    println(fd)

    println(fd,"ACOORD")
    println(fd,length(dat.acoord))
    for (i,j,v) in dat.acoord
        println(fd,"$(i-1) $(j-1) $v")
    end
    println(fd)

    println(fd,"BCOORD")
    I = find(dat.bcoord)
    println(fd,length(I))
    for i in I
        println(fd,i-1," ",dat.bcoord[i])
    end

    close(fd)

end
